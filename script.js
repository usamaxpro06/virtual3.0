// Translation data
const translations = {
    en: {
        nav: {
            home: "Home",
            services: "Services",
            about: "About",
            contact: "Contact",
            pricing: "Pricing"
        },
        hero: {
            title: "Elite Virtual Computer",
            subtitle: "Services & Solutions",
            description: "Transform your technology experience with our premium remote computer services. Expert technicians available 24/7 for seamless solutions.",
            searchPlaceholder: "What computer service do you need?",
            exploreServices: "Explore Our Services",
            premiumPackages: "Premium Packages",
            trustedBy: "ðŸ† Trusted by 10,000+ Businesses",
            enterpriseSecurity: "Enterprise Security",
            bankGradeEncryption: "Bank-grade encryption",
            support247: "24/7 Support",
            lightningFastResponse: "Lightning-fast response",
            clientsCount: "10,000+ Clients",
            trustedWorldwide: "Trusted worldwide",
            enterpriseGradeSolutions: "Enterprise-Grade Solutions",
            enterpriseGradeDescription: "Experience unparalleled expertise with our comprehensive suite of professional computer services, designed to elevate your digital infrastructure."
        },
        services: {
            windowsActivation: "Windows Activation",
            softwareInstallation: "Software Installation",
            dataEntry: "Data Entry Services",
            systemSetup: "System Setup & Optimization",
            contactUs: "Contact Us"
        },
        pricing: {
            title: "Simple, Transparent Pricing",
            description: "Choose the package that best fits your needs. No hidden fees, no surprises.",
            packages: {
                basic: {
                    name: "Basic Package",
                    description: "Perfect for simple Windows activation needs",
                    buttonText: "Choose Basic"
                },
                advanced: {
                    name: "Advanced Package",
                    description: "Comprehensive setup with multiple installations",
                    buttonText: "Choose Advanced"
                },
                premium: {
                    name: "Premium Package",
                    description: "Complete computer setup and ongoing support",
                    buttonText: "Choose Premium"
                }
            }
        },
        about: {
            title: "About VirtualTech Pro",
            description: "We're a team of dedicated professionals providing reliable, secure, and efficient virtual computer services to clients worldwide.",
            ourStory: "Our Story",
            storyParagraph1: "Founded in 2020, VirtualTech Pro started with a simple mission: to provide professional computer services remotely, making expert technical help accessible to everyone, regardless of location.",
            storyParagraph2: "What began as a small team of tech enthusiasts has grown into a trusted service provider, helping thousands of clients with their computer needs. We've handled everything from simple Windows activations to complex system setups.",
            statsLabels: {
                happyClients: "Happy Clients",
                hoursOfService: "Hours of Service",
                successRate: "Success Rate",
                secureConnections: "Secure Connections"
            }
        },
        contact: {
            title: "Get In Touch",
            description: "Ready to get your computer issues resolved? Contact us today for a free quote and fast, professional service.",
            emailUs: "Email Us",
            callUs: "Call Us",
            whatsapp: "WhatsApp",
            sendEmail: "Send Email",
            callNow: "Call Now",
            openWhatsApp: "Open WhatsApp",
            chatInstantly: "Chat with us instantly",
            sendMessage: "Send Us a Message",
            sendMessageDesc: "Fill out the form below and we'll get back to you within 2 hours during business hours."
        },
        common: {
            getStarted: "Get Started",
            mostPopular: "Most Popular"
        },
        footer: {
            brandDescription: "Professional virtual computer services for all your tech needs. Fast, reliable, and secure.",
            quickLinks: "Quick Links",
            ourServices: "Our Services",
            pricing: "Pricing",
            aboutUs: "About Us",
            contact: "Contact",
            services: "Services",
            windowsActivation: "Windows Activation",
            softwareInstallation: "Software Installation",
            dataEntry: "Data Entry",
            systemSetup: "System Setup",
            technicalSupport: "Technical Support",
            contactInfo: "Contact Info",
            availableWorldwide: "Available Worldwide",
            copyright: "Â© 2024 VirtualTech Pro. All rights reserved."
        },
        search: {
            button: "Search"
        }
    },
    ar: {
        nav: {
            home: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
            services: "Ø§Ù„Ø®Ø¯Ù…Ø§Øª",
            about: "Ø­ÙˆÙ„Ù†Ø§",
            contact: "Ø§ØªØµÙ„ Ø¨Ù†Ø§",
            pricing: "Ø§Ù„Ø£Ø³Ø¹Ø§Ø±"
        },
        hero: {
            title: "Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø­Ø§Ø³ÙˆØ¨ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©",
            subtitle: "Ø§Ù„Ù…ØªÙ…ÙŠØ²Ø© ÙˆØ§Ù„Ø­Ù„ÙˆÙ„",
            description: "Ø­ÙˆÙ‘Ù„ ØªØ¬Ø±Ø¨ØªÙƒ Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ù…Ø¹ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø­Ø§Ø³ÙˆØ¨ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø§Ù„Ù…ØªÙ…ÙŠØ²Ø©. ÙÙ†ÙŠÙˆÙ† Ø®Ø¨Ø±Ø§Ø¡ Ù…ØªØ§Ø­ÙˆÙ† Ø¹Ù„Ù‰ Ù…Ø¯Ø§Ø± Ø§Ù„Ø³Ø§Ø¹Ø© Ù„Ø­Ù„ÙˆÙ„ Ø³Ù„Ø³Ø©.",
            searchPlaceholder: "Ù…Ø§ Ø®Ø¯Ù…Ø© Ø§Ù„Ø­Ø§Ø³ÙˆØ¨ Ø§Ù„ØªÙŠ ØªØ­ØªØ§Ø¬Ù‡Ø§ØŸ",
            exploreServices: "Ø§Ø³ØªÙƒØ´Ù Ø®Ø¯Ù…Ø§ØªÙ†Ø§",
            premiumPackages: "Ø§Ù„Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ù…ØªÙ…ÙŠØ²Ø©",
            trustedBy: "ðŸ† Ù…ÙˆØ«ÙˆÙ‚ Ù…Ù† Ù‚Ø¨Ù„ Ø£ÙƒØ«Ø± Ù…Ù† 10,000 Ø´Ø±ÙƒØ©",
            enterpriseSecurity: "Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ø¤Ø³Ø³Ø§Øª",
            bankGradeEncryption: "ØªØ´ÙÙŠØ± Ø¨Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¨Ù†ÙˆÙƒ",
            support247: "Ø¯Ø¹Ù… 24/7",
            lightningFastResponse: "Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø³Ø±ÙŠØ¹Ø© ÙƒØ§Ù„Ø¨Ø±Ù‚",
            clientsCount: "10,000+ Ø¹Ù…ÙŠÙ„",
            trustedWorldwide: "Ù…ÙˆØ«ÙˆÙ‚ Ø¨Ù‡ Ø¹Ø§Ù„Ù…ÙŠÙ‹Ø§",
            enterpriseGradeSolutions: "Ø­Ù„ÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø¤Ø³Ø³Ø§Øª",
            enterpriseGradeDescription: "Ø§Ø®ØªØ¨Ø± Ø®Ø¨Ø±Ø© Ù„Ø§ Ù…Ø«ÙŠÙ„ Ù„Ù‡Ø§ Ù…Ø¹ Ù…Ø¬Ù…ÙˆØ¹ØªÙ†Ø§ Ø§Ù„Ø´Ø§Ù…Ù„Ø© Ù…Ù† Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø­Ø§Ø³ÙˆØ¨ Ø§Ù„Ù…Ù‡Ù†ÙŠØ©ØŒ Ø§Ù„Ù…ØµÙ…Ù…Ø© Ù„Ø±ÙØ¹ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ù„Ø¯ÙŠÙƒ."
        },
        services: {
            windowsActivation: "ØªÙØ¹ÙŠÙ„ ÙˆÙŠÙ†Ø¯ÙˆØ²",
            softwareInstallation: "ØªØ«Ø¨ÙŠØª Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬",
            dataEntry: "Ø®Ø¯Ù…Ø§Øª Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",
            systemSetup: "Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØªØ­Ø³ÙŠÙ† Ø§Ù„Ù†Ø¸Ø§Ù…",
            contactUs: "Ø§ØªØµÙ„ Ø¨Ù†Ø§"
        },
        pricing: {
            title: "ØªØ³Ø¹ÙŠØ± Ø¨Ø³ÙŠØ· ÙˆØ´ÙØ§Ù",
            description: "Ø§Ø®ØªØ± Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙŠ ØªÙ†Ø§Ø³Ø¨ Ø§Ø­ØªÙŠØ§Ø¬Ø§ØªÙƒ. Ù„Ø§ Ø±Ø³ÙˆÙ… Ø®ÙÙŠØ©ØŒ Ù„Ø§ Ù…ÙØ§Ø¬Ø¢Øª.",
            packages: {
                basic: {
                    name: "Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©",
                    description: "Ù…Ø«Ø§Ù„ÙŠØ© Ù„Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª ØªÙØ¹ÙŠÙ„ ÙˆÙŠÙ†Ø¯ÙˆØ² Ø§Ù„Ø¨Ø³ÙŠØ·Ø©",
                    buttonText: "Ø§Ø®ØªØ± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©"
                },
                advanced: {
                    name: "Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©",
                    description: "Ø¥Ø¹Ø¯Ø§Ø¯ Ø´Ø§Ù…Ù„ Ù…Ø¹ Ø¹Ø¯Ø© ØªØ«Ø¨ÙŠØªØ§Øª",
                    buttonText: "Ø§Ø®ØªØ± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©"
                },
                premium: {
                    name: "Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ù…ÙŠØ²Ø©",
                    description: "Ø¥Ø¹Ø¯Ø§Ø¯ Ø­Ø§Ø³ÙˆØ¨ ÙƒØ§Ù…Ù„ ÙˆØ¯Ø¹Ù… Ù…Ø³ØªÙ…Ø±",
                    buttonText: "Ø§Ø®ØªØ± Ø§Ù„Ù…Ù…ÙŠØ²Ø©"
                }
            }
        },
        about: {
            title: "Ø­ÙˆÙ„ VirtualTech Pro",
            description: "Ù†Ø­Ù† ÙØ±ÙŠÙ‚ Ù…Ù† Ø§Ù„Ù…Ù‡Ù†ÙŠÙŠÙ† Ø§Ù„Ù…ØªÙØ§Ù†ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† ÙŠÙ‚Ø¯Ù…ÙˆÙ† Ø®Ø¯Ù…Ø§Øª Ø­Ø§Ø³ÙˆØ¨ Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù…ÙˆØ«ÙˆÙ‚Ø© ÙˆØ¢Ù…Ù†Ø© ÙˆÙØ¹Ø§Ù„Ø© Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø£Ù†Ø­Ø§Ø¡ Ø§Ù„Ø¹Ø§Ù„Ù….",
            ourStory: "Ù‚ØµØªÙ†Ø§",
            storyParagraph1: "ØªØ£Ø³Ø³Øª VirtualTech Pro ÙÙŠ Ø¹Ø§Ù… 2020ØŒ Ø¨Ø¯Ø£Øª Ø¨Ù…Ù‡Ù…Ø© Ø¨Ø³ÙŠØ·Ø©: ØªÙ‚Ø¯ÙŠÙ… Ø®Ø¯Ù…Ø§Øª Ø­Ø§Ø³ÙˆØ¨ Ù…Ù‡Ù†ÙŠØ© Ø¹Ù† Ø¨ÙØ¹Ø¯ØŒ Ù…Ù…Ø§ ÙŠØ¬Ø¹Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ù…ØªØ®ØµØµØ© ÙÙŠ Ù…ØªÙ†Ø§ÙˆÙ„ Ø§Ù„Ø¬Ù…ÙŠØ¹ØŒ Ø¨ØºØ¶ Ø§Ù„Ù†Ø¸Ø± Ø¹Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹.",
            storyParagraph2: "Ù…Ø§ Ø¨Ø¯Ø£ ÙƒÙØ±ÙŠÙ‚ ØµØºÙŠØ± Ù…Ù† Ø¹Ø´Ø§Ù‚ Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ù†Ù…Ø§ Ù„ÙŠØµØ¨Ø­ Ù…Ù‚Ø¯Ù… Ø®Ø¯Ù…Ø© Ù…ÙˆØ«ÙˆÙ‚ØŒ ÙŠØ³Ø§Ø¹Ø¯ Ø¢Ù„Ø§Ù Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙÙŠ Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø­Ø§Ø³ÙˆØ¨ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù‡Ù…. Ù„Ù‚Ø¯ ØªØ¹Ø§Ù…Ù„Ù†Ø§ Ù…Ø¹ ÙƒÙ„ Ø´ÙŠØ¡ Ù…Ù† ØªÙØ¹ÙŠÙ„ Windows Ø§Ù„Ø¨Ø³ÙŠØ· Ø¥Ù„Ù‰ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©.",
            statsLabels: {
                happyClients: "Ø¹Ù…Ù„Ø§Ø¡ Ø³Ø¹Ø¯Ø§Ø¡",
                hoursOfService: "Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø®Ø¯Ù…Ø©",
                successRate: "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­",
                secureConnections: "Ø§ØªØµØ§Ù„Ø§Øª Ø¢Ù…Ù†Ø©"
            }
        },
        contact: {
            title: "Ø§Ø¨Ù‚Ù‰ Ø¹Ù„Ù‰ ØªÙˆØ§ØµÙ„",
            description: "Ù…Ø³ØªØ¹Ø¯ Ù„Ø­Ù„ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø­Ø§Ø³ÙˆØ¨ Ø§Ù„Ø®Ø§Øµ Ø¨ÙƒØŸ Ø§ØªØµÙ„ Ø¨Ù†Ø§ Ø§Ù„ÙŠÙˆÙ… Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ø±Ø¶ Ø³Ø¹Ø± Ù…Ø¬Ø§Ù†ÙŠ ÙˆØ®Ø¯Ù…Ø© Ø³Ø±ÙŠØ¹Ø© ÙˆÙ…Ù‡Ù†ÙŠØ©.",
            emailUs: "Ø±Ø§Ø³Ù„Ù†Ø§",
            callUs: "Ø§ØªØµÙ„ Ø¨Ù†Ø§",
            whatsapp: "ÙˆØ§ØªØ³ Ø¢Ø¨",
            sendEmail: "Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
            callNow: "Ø§ØªØµÙ„ Ø§Ù„Ø¢Ù†",
            openWhatsApp: "ÙØªØ­ ÙˆØ§ØªØ³ Ø¢Ø¨",
            chatInstantly: "ØªØ­Ø¯Ø« Ù…Ø¹Ù†Ø§ ÙÙˆØ±Ø§Ù‹",
            sendMessage: "Ø£Ø±Ø³Ù„ Ù„Ù†Ø§ Ø±Ø³Ø§Ù„Ø©",
            sendMessageDesc: "Ø§Ù…Ù„Ø£ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø£Ø¯Ù†Ø§Ù‡ ÙˆØ³Ù†Ø¹Ø§ÙˆØ¯ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ùƒ Ø®Ù„Ø§Ù„ Ø³Ø§Ø¹ØªÙŠÙ† Ø®Ù„Ø§Ù„ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„."
        },
        common: {
            getStarted: "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†",
            mostPopular: "Ø§Ù„Ø£ÙƒØ«Ø± Ø´Ø¹Ø¨ÙŠØ©"
        },
        footer: {
            brandDescription: "Ø®Ø¯Ù…Ø§Øª Ø­Ø§Ø³ÙˆØ¨ Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„Ø¬Ù…ÙŠØ¹ Ø§Ø­ØªÙŠØ§Ø¬Ø§ØªÙƒ Ø§Ù„ØªÙ‚Ù†ÙŠØ©. Ø³Ø±ÙŠØ¹ ÙˆÙ…ÙˆØ«ÙˆÙ‚ ÙˆØ¢Ù…Ù†.",
            quickLinks: "Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©",
            ourServices: "Ø®Ø¯Ù…Ø§ØªÙ†Ø§",
            pricing: "Ø§Ù„Ø£Ø³Ø¹Ø§Ø±",
            aboutUs: "Ø­ÙˆÙ„Ù†Ø§",
            contact: "Ø§ØªØµÙ„ Ø¨Ù†Ø§",
            services: "Ø§Ù„Ø®Ø¯Ù…Ø§Øª",
            windowsActivation: "ØªÙØ¹ÙŠÙ„ ÙˆÙŠÙ†Ø¯ÙˆØ²",
            softwareInstallation: "ØªØ«Ø¨ÙŠØª Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬",
            dataEntry: "Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",
            systemSetup: "Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†Ø¸Ø§Ù…",
            technicalSupport: "Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ",
            contactInfo: "Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„",
            availableWorldwide: "Ù…ØªØ§Ø­ Ø¹Ø§Ù„Ù…ÙŠØ§Ù‹",
            copyright: "Â© 2024 VirtualTech Pro. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©."
        },
        search: {
            button: "Ø¨Ø­Ø«"
        }
    }
};

// Current language
let currentLang = 'en';

// DOM Elements
const elements = {
    languageBtn: document.getElementById('languageBtn'),
    languageDropdown: document.getElementById('languageDropdown'),
    mobileMenuBtn: document.getElementById('mobileMenuBtn'),
    mobileNav: document.getElementById('mobileNav'),
    contactForm: document.getElementById('contactForm'),
    toast: document.getElementById('toast')
};

// Initialize the application
function init() {
    // Set up event listeners
    setupEventListeners();
    
    // Initialize language
    const savedLang = localStorage.getItem('language') || 'en';
    setLanguage(savedLang);
    
    // Initialize smooth scrolling
    setupSmoothScrolling();
    
    // Initialize animations
    setupScrollAnimations();
    
    // Handle hash navigation
    handleHashNavigation();
}

// Set up all event listeners
function setupEventListeners() {
    // Language switcher
    if (elements.languageBtn) {
        elements.languageBtn.addEventListener('click', toggleLanguageDropdown);
    }
    
    // Language options
    document.querySelectorAll('.language-option').forEach(option => {
        option.addEventListener('click', (e) => {
            const lang = e.currentTarget.dataset.lang;
            if (lang) {
                setLanguage(lang);
                closeLanguageDropdown();
            }
        });
    });
    
    // Mobile menu
    if (elements.mobileMenuBtn) {
        elements.mobileMenuBtn.addEventListener('click', toggleMobileMenu);
    }
    
    // Close mobile menu when clicking on links
    document.querySelectorAll('.nav-link-mobile').forEach(link => {
        link.addEventListener('click', closeMobileMenu);
    });
    
    // Contact form
    if (elements.contactForm) {
        elements.contactForm.addEventListener('submit', handleFormSubmit);
    }
    
    // Close dropdowns when clicking outside
    document.addEventListener('click', (e) => {
        if (!e.target.closest('.language-switcher')) {
            closeLanguageDropdown();
        }
    });
    
    // Navigation links
    document.querySelectorAll('a[href^="#"]').forEach(link => {
        link.addEventListener('click', handleNavClick);
    });
    
    // Update active nav links on scroll
    window.addEventListener('scroll', updateActiveNavLink);
    
    // Handle browser back/forward
    window.addEventListener('hashchange', handleHashNavigation);
}

// Language functions
function toggleLanguageDropdown() {
    if (elements.languageDropdown) {
        elements.languageDropdown.classList.toggle('active');
        elements.languageBtn.classList.toggle('active');
    }
}

function closeLanguageDropdown() {
    if (elements.languageDropdown) {
        elements.languageDropdown.classList.remove('active');
        elements.languageBtn.classList.remove('active');
    }
}

function setLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('language', lang);
    
    // Update HTML attributes
    document.documentElement.lang = lang;
    document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
    
    // Update language button
    updateLanguageButton(lang);
    
    // Translate all elements
    translatePage();
    
    // Update prices based on language
    updatePrices();
}

function updateLanguageButton(lang) {
    const flag = lang === 'ar' ? 'ðŸ‡¸ðŸ‡¦' : 'ðŸ‡ºðŸ‡¸';
    const text = lang === 'ar' ? 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©' : 'English';
    
    const flagElement = elements.languageBtn.querySelector('.flag');
    const textElement = elements.languageBtn.querySelector('.lang-text');
    
    if (flagElement) flagElement.textContent = flag;
    if (textElement) textElement.textContent = text;
}

function translatePage() {
    const t = translations[currentLang];
    
    // Translate elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.dataset.i18n;
        const translation = getNestedTranslation(t, key);
        if (translation) {
            element.textContent = translation;
        }
    });
    
    // Translate placeholder attributes
    document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
        const key = element.dataset.i18nPlaceholder;
        const translation = getNestedTranslation(t, key);
        if (translation) {
            element.placeholder = translation;
        }
    });
}

function getNestedTranslation(obj, key) {
    return key.split('.').reduce((o, k) => o && o[k], obj);
}

function updatePrices() {
    document.querySelectorAll('[data-price-en][data-price-ar]').forEach(element => {
        const priceKey = currentLang === 'ar' ? 'data-price-ar' : 'data-price-en';
        const price = element.getAttribute(priceKey);
        if (price) {
            element.textContent = price;
        }
    });
}

// Mobile menu functions
function toggleMobileMenu() {
    if (elements.mobileMenuBtn && elements.mobileNav) {
        elements.mobileMenuBtn.classList.toggle('active');
        elements.mobileNav.classList.toggle('active');
    }
}

function closeMobileMenu() {
    if (elements.mobileMenuBtn && elements.mobileNav) {
        elements.mobileMenuBtn.classList.remove('active');
        elements.mobileNav.classList.remove('active');
    }
}

// Navigation functions
function handleNavClick(e) {
    const href = e.currentTarget.getAttribute('href');
    if (href.startsWith('#')) {
        e.preventDefault();
        const targetId = href.substring(1);
        const targetElement = document.getElementById(targetId);
        
        if (targetElement) {
            targetElement.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
            
            // Update URL without triggering scroll
            history.pushState(null, '', href);
            
            // Close mobile menu
            closeMobileMenu();
        }
    }
}

function updateActiveNavLink() {
    const sections = document.querySelectorAll('section[id]');
    const navLinks = document.querySelectorAll('.nav-link, .nav-link-mobile');
    
    let currentSection = '';
    
    sections.forEach(section => {
        const rect = section.getBoundingClientRect();
        if (rect.top <= 100 && rect.bottom >= 100) {
            currentSection = section.id;
        }
    });
    
    navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === `#${currentSection}`) {
            link.classList.add('active');
        }
    });
}

function handleHashNavigation() {
    const hash = window.location.hash;
    if (hash) {
        const targetId = hash.substring(1);
        const targetElement = document.getElementById(targetId);
        
        if (targetElement) {
            setTimeout(() => {
                targetElement.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }, 100);
        }
    }
}

// Smooth scrolling setup
function setupSmoothScrolling() {
    // Already handled in handleNavClick
}

// Scroll animations
function setupScrollAnimations() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -100px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('fade-in');
            }
        });
    }, observerOptions);
    
    // Observe elements for animation
    document.querySelectorAll('.service-card, .pricing-card, .contact-method, .stat-item').forEach(el => {
        observer.observe(el);
    });
}

// Form handling
function handleFormSubmit(e) {
    e.preventDefault();
    
    const formData = new FormData(e.target);
    const data = Object.fromEntries(formData.entries());
    
    // Validate required fields
    if (!data.name || !data.email || !data.message) {
        showToast('Please fill in all required fields.', 'error');
        return;
    }
    
    // Validate email
    if (!isValidEmail(data.email)) {
        showToast('Please enter a valid email address.', 'error');
        return;
    }
    
    // Simulate form submission
    showToast('Message sent successfully! We\'ll get back to you within 2 hours during business hours.', 'success');
    
    // Reset form
    e.target.reset();
    
    // Here you would normally send the data to your backend
    console.log('Form data:', data);
}

function isValidEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
}

// Toast notifications
function showToast(message, type = 'success') {
    if (!elements.toast) return;
    
    elements.toast.textContent = message;
    elements.toast.className = `toast ${type}`;
    elements.toast.classList.add('show');
    
    setTimeout(() => {
        elements.toast.classList.remove('show');
    }, 5000);
}

// Search functionality
function handleSearch() {
    const searchInput = document.querySelector('.search-input');
    if (!searchInput) return;
    
    const query = searchInput.value.trim().toLowerCase();
    if (!query) return;
    
    // Simple search - scroll to services section
    const servicesSection = document.getElementById('services');
    if (servicesSection) {
        servicesSection.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
        });
    }
    
    // Highlight matching services (basic implementation)
    const serviceCards = document.querySelectorAll('.service-card');
    serviceCards.forEach(card => {
        const title = card.querySelector('.service-title');
        const description = card.querySelector('.service-description');
        
        if (title && description) {
            const titleText = title.textContent.toLowerCase();
            const descText = description.textContent.toLowerCase();
            
            if (titleText.includes(query) || descText.includes(query)) {
                card.style.border = '2px solid var(--primary)';
                setTimeout(() => {
                    card.style.border = '';
                }, 3000);
            }
        }
    });
    
    showToast(`Searching for: ${query}`, 'success');
}

// Set up search functionality
document.addEventListener('DOMContentLoaded', () => {
    const searchBtn = document.querySelector('.search-btn');
    const searchInput = document.querySelector('.search-input');
    
    if (searchBtn) {
        searchBtn.addEventListener('click', handleSearch);
    }
    
    if (searchInput) {
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleSearch();
            }
        });
    }
});

// Utility functions
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Performance optimizations
const debouncedUpdateActiveNavLink = debounce(updateActiveNavLink, 100);
window.addEventListener('scroll', debouncedUpdateActiveNavLink);

// Initialize when DOM is loaded
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
} else {
    init();
}

// Service Worker for offline functionality (optional)
if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
            .then((registration) => {
                console.log('SW registered: ', registration);
            })
            .catch((registrationError) => {
                console.log('SW registration failed: ', registrationError);
            });
    });
}